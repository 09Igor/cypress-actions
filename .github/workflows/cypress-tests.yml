name: Cypress Tests 

on:
  workflow_dispatch:
    inputs:
      cli:
        description: Run by Cypress node command
        default: node runner.js

jobs:
  cypress-tests:
    runs-on: ubuntu-latest
    steps:
      # Passo 1: Clonar o código
      - name: Checkout code
        uses: actions/checkout@v4.2.2

      # Passo 2: Instalar dependências
      - name: Install dependencies
        run: yarn install

      # Passo 3: Executar testes com Cypress e enviar resultados para Tesults
      - name: Run Cypress Tests and Upload to Tesults
        env:
          TESULTS_TOKEN: ${{ secrets.TESULTS_TOKEN }} # Token de autenticação do Tesults
        run: ${{ github.event.inputs.cli }}
